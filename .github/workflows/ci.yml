name: â­ CI

on:
    push:
        branches:
            - trunk
    pull_request_target:
        branches:
            - trunk
    workflow_dispatch:

jobs:
    ci:
        uses: ./.github/workflows/call-make.yml

    cd:
        - name: ğŸ›’ Checkout
          uses: actions/checkout@v3
          with:
              ref: ${{ github.event.pull_request.head.sha }}
              fetch-depth: '0'

        - name: ğŸ·ï¸ Bump version and push tag
          uses: anothrNick/github-tag-action@v1
          env:
              GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
              WITH_V: true
              VERBOSE: false
